let lance = {
  user_name : 'lance@lance.com',
  password : '$2a$10$fa.V3LnXYMzXv23lOT8N0.5qfiZvh/DdrruGa.tLG0KRhJ1iWWan6',
  bits : [{
            joke_title : 'Farts getting faster',
            body : [
              { body : `This is the first body of bit 1`,
                created_at : '2018-01-01 12:36:21.379288-06'
              },
              { body : `This is the second body of bit 1`,
                created_at : '2018-01-01 12:37:14.34731-06'
              },
              { body : `This is the third body of bit 1`,
                created_at : '2018-01-01 12:37:23.690095-06'
              }
            ],
            tags : [
              'Fart fury',
              'Brenner liked this',
              `Can't do this one in Oklahoma`
            ]
          },
          {
            joke_title : 'Forgetting how to type',
            body : [
              { body : `This is the first body of bit 2`,
                created_at : '2018-01-01 12:16:21.379288-06'
              },
              { body : `This is the second body of bit 2`,
                created_at : '2018-01-01 12:38:12.236263-06'
              }
            ],
            tags : [
              'Type',
              'Tag1'
            ]
          },
          {
            joke_title : 'Tech bros',
            body : [
              { body : `This is the first body of bit 3`,
                created_at : '2018-01-01 12:39:44.434804-06'
              }
            ],
            tags : []
          }],
  performances : [
    {
      per_title : 'Laugh Out Proud',
      location : 'Institution Theatre',
      given_time : 420,
      per_time : 400,
      audio : '/static/audio/test.mp3',
      rating : 4,
      date : '2018-01-01 13:46:23.405289-06'
    },
    {
      per_title : 'Laugh Out Proud',
      location : 'Institution Theatre',
      given_time : 420,
      per_time : 415,
      audio : '/static/audio/test.mp3',
      rating : 2,
      date : '2018-12-05 13:46:23.405289-06'
    },
    {
      per_title : 'Laugh Out Proud',
      location : 'Institution Theatre',
      given_time : 420,
      per_time : 435,
      audio : '/static/audio/test.mp3',
      rating : 4,
      date : '2017-12-01 13:46:23.405289-06'
    }
  ]
};

let paige = {
  user_name : 'paige@paige.com',
  password : '$2a$10$tPGtiaeUMPb0Fco4XvMsMukW81T0dT4HVPkkp.s/HfZB9lAv4bZVy',
  bits : [{
            joke_title : 'Baseball canoe',
            body : [
              { body : `This is the first body of bit 1`,
                created_at : '2018-01-01 12:36:21.379288-06'
              },
              { body : `This is the second body of bit 1`,
                created_at : '2018-01-01 12:37:14.34731-06'
              },
              { body : `What is people played baseball in canoes? That would be crazy, right? I mean, the water is so wet, and baseball is SO DRY!`,
                created_at : '2018-01-01 12:37:23.690095-06'
              }
            ],
            tags : [
              'Swing and a miss',
              'Boom goes the dynamite',
              `Sting every breath`,
              `We built this city on rock`,
              `Nobody knows but the best`,
              `Testing how long a tag can be because tags may get long if a comic is really analytical.`
            ]
          },
          {
            joke_title : 'Top five explosions of 2017',
            body : [
              { body : `This is the first body of bit 2`,
                created_at : '2018-01-01 12:36:21.379288-06'
              },
              { body : `This is the second body of bit 2`,
                created_at : '2018-01-01 12:37:14.34731-06'
              },
              { body : `I watch so many shows on The Smithsonian channel, and they always have these lists shows about really generic topics. Shows that are just "top 5 airplanes!" How can you rate the top 5 airplanes? Who is the judge of these top 5s? So here's my list of Top 5 Explosions!`,
                created_at : '2018-01-01 12:37:23.690095-06'
              }
            ],
            tags : [
              `Yosemite's gonna go eventually!`,
              `Or how I bombed tonight!`
            ]
          },
          {
            joke_title : 'Restaurants are everywhere',
            body : [
              { body : `I was making this project for quarter 1, about finding restaurants. There are SO MANY!`,
                created_at : '2018-01-01 12:36:21.379288-06'
              }
            ],
            tags : []
          },
          {
            joke_title : 'The story about that time I did that thing',
            body : [
              { body : `Telling a story, but never using any proper nouns. Everything is always as generic as possible.`,
                created_at : '2018-01-01 12:36:21.379288-06'
              }
            ],
            tags : []
          },
          {
            joke_title : 'Farts getting faster',
            body : [
              { body : `This is the first body of bit 1`,
                created_at : '2018-01-01 12:36:21.379288-06'
              },
              { body : `This is the second body of bit 1`,
                created_at : '2018-01-01 12:37:14.34731-06'
              },
              { body : `When I was a kid I remember people farting all the time. Now that I'm an adult, nobody farts. When's the last time you heard a fart in public? Are farts just getting faster?`,
                created_at : '2018-01-01 12:37:23.690095-06'
              }
            ],
            tags : [
              'Fart fury',
              'Brenner liked this',
              `Can't do this one in Oklahoma`
            ]
          },
          {
            joke_title : 'Forgetting how to type',
            body : [
              { body : `This is the first body of bit 2`,
                created_at : '2018-01-01 12:16:21.379288-06'
              },
              { body : `ouh;oenub;soruntbs;rgbnr;tjbnsr;tbjnrstb`,
                created_at : '2018-01-01 12:38:12.236263-06'
              }
            ],
            tags : [
              'Typing is hard',
              `That's why Siri is the future!`
            ]
          },
          {
            joke_title : 'Tech bros',
            body : [
              { body : `SO. MANY. BROS.`,
                created_at : '2018-01-01 12:39:44.434804-06'
              }
            ],
            tags : []
          },


        ],
  performances : [
    {
      per_title : 'Reordered Mic',
      location : 'Kick Butt Coffee',
      given_time : 300,
      per_time : 290,
      audio : '/static/audio/test.mp3',
      rating : 2,
      date : '2018-01-01 13:46:23.405289-06'
    },
    {
      per_title : 'FPIA',
      location : 'Cap City Comedy Club',
      given_time : 300,
      per_time : 295,
      audio : '/static/audio/test.mp3',
      rating : 4,
      date : '2018-12-05 13:46:23.405289-06'
    },
    {
      per_title : 'Stories from the Edge',
      location : 'Spiderhouse Ballroom',
      given_time : 900,
      per_time : 899,
      audio : '/static/audio/test.mp3',
      rating : 5,
      date : '2017-12-01 13:46:23.405289-06'
    },
    {
      per_title : 'Coldtowne Open Mic',
      location : 'Coldtowne Theatre',
      given_time : 300,
      per_time : 280,
      audio : '/static/audio/test.mp3',
      rating : 4,
      date : '2017-10-01 13:46:23.405289-06'
    },
    {
      per_title : 'Speed Mic',
      location : 'The Velv',
      given_time : 300,
      per_time : 290,
      audio : '/static/audio/test.mp3',
      rating : 4,
      date : '2017-11-01 13:46:23.405289-06'
    },
    {
      per_title : 'Laugh Out Proud',
      location : 'Institution Theatre',
      given_time : 420,
      per_time : 400,
      audio : '/static/audio/test.mp3',
      rating : 4,
      date : '2018-01-01 13:46:23.405289-06'
    },
    {
      per_title : 'Laugh Out Proud',
      location : 'Institution Theatre',
      given_time : 420,
      per_time : 415,
      audio : '/static/audio/test.mp3',
      rating : 2,
      date : '2018-12-05 13:46:23.405289-06'
    },
    {
      per_title : 'Laugh Out Proud',
      location : 'Institution Theatre',
      given_time : 420,
      per_time : 435,
      audio : '/static/audio/test.mp3',
      rating : 4,
      date : '2017-12-01 13:46:23.405289-06'
    }
  ]

};

exports.seed = function(knex, Promise) {
  // Deletes ALL existing entries
  return knex('jokes_labels').del()
    .then(() => {
      return knex('labels').del();
    })
    .then(() => {
      return knex('jokes_performances').del();
    })
    .then(() => {
      return knex('joke_body').del();
    })
    .then(() => {
      return knex('tags').del();
    })
    .then(() => {
      return knex('performances').del();
    })
    .then(() => {
      return knex('jokes').del();
    })
    .then(() => {
      return knex('users').del();
    })
    .then(() => {
      return knex('users').returning('id').insert([
        { user_name : lance.user_name,
          password : lance.password },
        { user_name : paige.user_name,
          password : paige.password },
      ]);
    })
    .then((userIDs) => {
      lance.user_id = userIDs[0];
      paige.user_id = userIDs[1];
      console.log('lance.user_id - ', lance.user_id, ' || paige.user_id - ', paige.user_id );
      let labelsInsertArr = [
        {'user_id' : lance.user_id,
         'label' : 'new'},
        {'user_id' : lance.user_id,
         'label' : 'good'},
        {'user_id' : lance.user_id,
         'label' : 'closer'},
         {'user_id' : paige.user_id,
          'label' : 'new'},
         {'user_id' : paige.user_id,
          'label' : 'good'},
         {'user_id' : paige.user_id,
          'label' : 'closer'},
      ];
      return knex('labels').returning('label_id').insert(labelsInsertArr);
    })
    .then((labelIDs) => {
      console.log('The label IDs - ', labelIDs);
      lance.bits[0].label_id = labelIDs[0];
      lance.bits[2].label_id = labelIDs[2];
      paige.bits[1].label_id = labelIDs[4];
      let jokeInsertArr = [];
      lance.bits.forEach((bit) => {
        if (bit.label_id) {
          jokeInsertArr.push({
            joke_title : bit.joke_title,
            label_id : bit.label_id,
            user_id : lance.user_id
          });
        } else {
          jokeInsertArr.push({
            joke_title : bit.joke_title,
            user_id : lance.user_id
          });
        }
      });
      paige.bits.forEach((bit) => {
        if (bit.label_id) {
          jokeInsertArr.push({
            joke_title : bit.joke_title,
            label_id : bit.label_id,
            user_id : paige.user_id
          });
        } else {
          jokeInsertArr.push({
            joke_title : bit.joke_title,
            user_id : paige.user_id
          });
        }
      });
      return knex('jokes').returning('joke_id').insert(jokeInsertArr);
    })
    .then((jokeIDs) => {
      console.log('The joke IDs - ', jokeIDs);
      let jokeBodyInsertArr = [];
      lance.bits.forEach((bit) => {
        bit.joke_id = jokeIDs.shift();
        bit.body.forEach((bitBody) => {
          jokeBodyInsertArr.push({
            joke_id : bit.joke_id,
            body : bitBody.body,
            created_at : bitBody.created_at
          });
        });
      });
      paige.bits.forEach((bit) => {
        bit.joke_id = jokeIDs.shift();
        bit.body.forEach((bitBody) => {
          jokeBodyInsertArr.push({
            joke_id : bit.joke_id,
            body : bitBody.body,
            created_at : bitBody.created_at
          });
        });
      });
      return knex('joke_body').insert(jokeBodyInsertArr);
    })
    .then(() => {
      let tagsInsertArr = [];
      lance.bits.forEach((bit) => {
        bit.tags.forEach((tag) => {
          tagsInsertArr.push({
            joke_id : bit.joke_id,
            tag : tag
          });
        });
      });
      paige.bits.forEach((bit) => {
        bit.tags.forEach((tag) => {
          tagsInsertArr.push({
            joke_id : bit.joke_id,
            tag : tag
          });
        });
      });
      return knex('tags').insert(tagsInsertArr);
    })
    .then(() => {
      let performanceInsertArr = [];
      lance.performances.forEach((perf) => {
        performanceInsertArr.push({
          per_title : perf.per_title,
          user_id : lance.user_id,
          location : perf.location,
          given_time : perf.given_time,
          per_time : perf.per_time,
          audio : perf.audio,
          rating : perf.rating,
          date : perf.date
        });
      });
      paige.performances.forEach((perf) => {
        performanceInsertArr.push({
          per_title : perf.per_title,
          user_id : paige.user_id,
          location : perf.location,
          given_time : perf.given_time,
          per_time : perf.per_time,
          audio : perf.audio,
          rating : perf.rating,
          date : perf.date
        });
      });
      return knex('performances').returning('per_id').insert(performanceInsertArr);
    })
    .then((performanceIDs) => {
      console.log('Performance IDs - ', performanceIDs);
      let performancesJokesInsertArr = [];
      lance.performances.forEach((perf) => {
        perf.per_id = performanceIDs.shift();
        lance.bits.forEach((bit) => {
          performancesJokesInsertArr.push({
            joke_id : bit.joke_id,
            per_id : perf.per_id
          });
        });
      });
      paige.performances.forEach((perf) => {
        perf.per_id = performanceIDs.shift();
        paige.bits.forEach((bit) => {
          performancesJokesInsertArr.push({
            joke_id : bit.joke_id,
            per_id : perf.per_id
          });
        });
      });
      console.log('The performances insert array - ', performancesJokesInsertArr);
      return knex('jokes_performances').insert(performancesJokesInsertArr);
    });
};
